# PayHook Environment Variables Example
# Copy this file to .env and update with your actual values

# ============================================
# Database Configuration
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=payhook
DB_PASSWORD=payhook
DB_NAME=payhook
DB_LOGGING=false
DB_POOL_SIZE=10

# ============================================
# Node Environment
# ============================================
NODE_ENV=development  # development | staging | production

# ============================================
# PayHook Core Configuration
# ============================================
SKIP_SIGNATURE_VERIFICATION=false  # NEVER set to true in production!
STORE_RAW_PAYLOAD=true             # Store raw webhooks for debugging
ENABLE_OUTBOX=false                # Enable outbox pattern for guaranteed delivery
WEBHOOK_TIMEOUT_MS=30000           # Webhook processing timeout

# ============================================
# Paystack Configuration
# ============================================
# Important: Paystack uses the SAME secret key for both webhook signatures AND API calls
# This is different from providers like Stripe that have separate keys

# Test Environment
PAYSTACK_SECRET_KEY=sk_test_xxxxx      # Used for BOTH webhooks and API calls
PAYSTACK_PUBLIC_KEY=pk_test_xxxxx      # Optional, for frontend integrations

# Production (uncomment and use these instead for production)
# PAYSTACK_SECRET_KEY=sk_live_xxxxx
# PAYSTACK_PUBLIC_KEY=pk_live_xxxxx

# For key rotation (optional)
# PAYSTACK_SECRET_KEY_OLD=sk_test_old_xxxxx  # Previous key during migration

# ============================================
# Stripe Configuration (if using Stripe)
# ============================================
# Important: Stripe uses DIFFERENT keys for API and webhooks!

# Test Environment
STRIPE_SECRET_KEY=sk_test_xxxxx           # API secret key (for API calls)
STRIPE_WEBHOOK_SECRET=whsec_test_xxxxx    # Webhook endpoint secret (for signatures)
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx      # Optional, for frontend

# Production (uncomment and use these instead for production)
# STRIPE_SECRET_KEY=sk_live_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_live_xxxxx
# STRIPE_PUBLISHABLE_KEY=pk_live_xxxxx

# For key rotation (optional)
# STRIPE_WEBHOOK_SECRET_OLD=whsec_test_old_xxxxx

# ============================================
# Flutterwave Configuration (if using Flutterwave)
# ============================================
# Important: Flutterwave uses separate keys for API and webhook verification

# Test Environment
FLUTTERWAVE_SECRET_KEY=FLWSECK_TEST-xxxxx      # API secret key
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK_TEST-xxxxx      # Public key
FLUTTERWAVE_WEBHOOK_SECRET_HASH=xxxxx          # Webhook verification hash

# Production (uncomment and use these instead for production)
# FLUTTERWAVE_SECRET_KEY=FLWSECK-xxxxx
# FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-xxxxx
# FLUTTERWAVE_WEBHOOK_SECRET_HASH=xxxxx

# ============================================
# Mock Provider (for testing)
# ============================================
MOCK_PROVIDER_SECRETS=test_secret_1,test_secret_2

# ============================================
# Event Dispatcher Configuration
# ============================================
ENABLE_EVENT_LOGGING=true
LOG_LEVEL=info  # debug | info | warn | error

# ============================================
# API Configuration
# ============================================
API_PORT=3000
API_PREFIX=/api/v1
RAW_BODY_LIMIT=10mb
ENABLE_SWAGGER=true

# ============================================
# Security Configuration
# ============================================
# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100

# IP Allowlisting (comma-separated, optional)
# Leave empty to allow all IPs (not recommended for production)
# ALLOWED_IPS=52.31.139.75,52.49.173.169,52.214.14.220  # Paystack IPs

# Body Size Limit
MAX_BODY_SIZE=1048576  # 1MB in bytes

# ============================================
# Monitoring & Observability
# ============================================
METRICS_ENABLED=false
HEALTH_CHECK_ENABLED=true

# ============================================
# Data Retention (in days)
# ============================================
WEBHOOK_LOG_RETENTION_DAYS=90
DISPATCH_LOG_RETENTION_DAYS=30
AUDIT_LOG_RETENTION_DAYS=365  # Keep audit logs for 1 year